2025-12-10 09:06:25 - Starting ElectricianApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 1 (/app/app.jar started by root in /app)
2025-12-10 09:06:25 - Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-10 09:06:25 - No active profile set, falling back to 1 default profile: "default"
2025-12-10 09:06:25 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-10 09:06:25 - Finished Spring Data repository scanning in 12 ms. Found 0 JPA repository interfaces.
2025-12-10 09:06:26 - Tomcat initialized with port 8081 (http)
2025-12-10 09:06:26 - Starting service [Tomcat]
2025-12-10 09:06:26 - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-10 09:06:26 - Root WebApplicationContext: initialization completed in 1107 ms
2025-12-10 09:06:26 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-10 09:06:26 - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-10 09:06:27 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-10 09:06:28 - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-10 09:06:28 - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://postgres:5432/electrician_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 17.7
	Default catalog/schema: electrician_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-10 09:06:28 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-10 09:06:28 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 09:06:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    price_unit VARCHAR(50) DEFAULT 'за штуку',
    is_popular BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 09:06:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS works (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    work_date DATE NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 09:06:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    role VARCHAR(20) DEFAULT 'USER',
    active BOOLEAN DEFAULT true,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email_verified ON users(email_verified) WHERE email_verified = false]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_active ON users(active)]
2025-12-10 09:06:28 - Executing SQL statement [INSERT INTO users (username, password, email, role)
VALUES ('admin', '$2a$12$85ADATkk12Cv4rjSUWpxg.t4pOOJBWevboxVEzhG8Icfko0vY39nS', 'electric252.com@gmail.com', 'ADMIN')
ON CONFLICT (username) DO NOTHING;
]
2025-12-10 09:06:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS email_verifications (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    verification_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    user_id BIGINT NOT NULL,
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
)
]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email ON email_verifications(email)]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email_code ON email_verifications(email, verification_code)]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_expires ON email_verifications(expires_at)]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_used ON email_verifications(used) WHERE used = false]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_user_id ON email_verifications(user_id)]
2025-12-10 09:06:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    username VARCHAR(100) NOT NULL,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT NOT NULL,
    admin_response TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_user_id ON reviews(user_id)]
2025-12-10 09:06:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_active ON reviews(active)]
2025-12-10 09:06:28 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-10 09:06:29 - 38 mappings in 'requestMappingHandlerMapping'
2025-12-10 09:06:29 - Default resource handling disabled
2025-12-10 09:06:29 - Patterns [/static/uploads/**, /static/**] in 'resourceHandlerMapping'
2025-12-10 09:06:29 - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-10 09:06:29 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-10 09:06:29 - Tomcat started on port 8081 (http) with context path '/'
2025-12-10 09:06:29 - Started ElectricianApplication in 4.676 seconds (process running for 5.237)
2025-12-10 09:06:33 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-10 09:06:33 - Initializing Servlet 'dispatcherServlet'
2025-12-10 09:06:33 - Detected StandardServletMultipartResolver
2025-12-10 09:06:33 - Detected AcceptHeaderLocaleResolver
2025-12-10 09:06:33 - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7efa366
2025-12-10 09:06:33 - Detected org.springframework.web.servlet.support.SessionFlashMapManager@372f7bc
2025-12-10 09:06:33 - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-10 09:06:33 - Completed initialization in 3 ms
2025-12-10 09:06:33 - GET "/", parameters={}
2025-12-10 09:06:33 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 09:06:33 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:06:34 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 09:06:34 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:06:34 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:06:34 - Completed 200 OK
2025-12-10 09:06:40 - GET "/login", parameters={}
2025-12-10 09:06:40 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:06:40 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:06:40 - Completed 200 OK
2025-12-10 09:06:51 - POST "/login", parameters={masked}
2025-12-10 09:06:51 - Mapped to com.extrime.electrician.controller.AuthController#login(String, String, HttpSession, Model)
2025-12-10 09:06:51 - Executing prepared SQL query
2025-12-10 09:06:51 - Executing prepared SQL statement [SELECT * FROM users WHERE username = ? AND active = true]
2025-12-10 09:06:51 - View name [redirect:], model {}
2025-12-10 09:06:51 - Completed 302 FOUND
2025-12-10 09:06:51 - GET "/profile", parameters={}
2025-12-10 09:06:51 - Mapped to com.extrime.electrician.controller.AuthController#showProfile(HttpSession, Model)
2025-12-10 09:06:51 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:06:51 - Completed 200 OK
2025-12-10 09:06:57 - GET "/admin", parameters={}
2025-12-10 09:06:57 - Mapped to com.extrime.electrician.controller.AdminController#adminPanel(HttpSession, Model)
2025-12-10 09:06:57 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:06:57 - Completed 200 OK
2025-12-10 09:06:57 - GET "/static/css/file-upload.css", parameters={}
2025-12-10 09:06:57 - GET "/static/css/admin.css", parameters={}
2025-12-10 09:06:57 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:06:57 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:06:57 - Completed 200 OK
2025-12-10 09:06:57 - Completed 200 OK
2025-12-10 09:06:57 - GET "/static/js/admin-script.js", parameters={}
2025-12-10 09:06:57 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:06:57 - Completed 200 OK
2025-12-10 09:06:57 - GET "/api/admin/works", parameters={}
2025-12-10 09:06:57 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllWorks(HttpSession)
2025-12-10 09:06:57 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:06:57 - GET "/api/admin/services", parameters={}
2025-12-10 09:06:57 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllServices(HttpSession)
2025-12-10 09:06:57 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:06:57 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:06:57 - Writing [[]]
2025-12-10 09:06:57 - Completed 200 OK
2025-12-10 09:06:57 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:06:57 - Writing [[]]
2025-12-10 09:06:57 - Completed 200 OK
2025-12-10 09:08:25 - POST "/api/admin/services", parameters={}
2025-12-10 09:08:25 - Mapped to com.extrime.electrician.controller.AdminApiController#createService(Map, HttpSession)
2025-12-10 09:08:25 - Read "application/json;charset=UTF-8" to [{title=12, description=132, price=12, priceUnit=штука, isPopular=true}]
2025-12-10 09:08:25 - Executing SQL update and returning generated keys
2025-12-10 09:08:25 - Executing prepared SQL statement
2025-12-10 09:08:08 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:08:08 - Writing [{success=true, id=1, message=Услуга успешно добавлена}]
2025-12-10 09:08:08 - Completed 200 OK
2025-12-10 09:08:08 - GET "/api/admin/services", parameters={}
2025-12-10 09:08:08 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllServices(HttpSession)
2025-12-10 09:08:08 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:08:08 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:08:08 - Writing [[com.extrime.electrician.model.OurService@39141e7f]]
2025-12-10 09:08:08 - Completed 200 OK
2025-12-10 09:08:38 - POST "/api/admin/works/upload", parameters={multipart}
2025-12-10 09:08:20 - Mapped to com.extrime.electrician.controller.AdminApiController#createWorkWithUpload(String, String, String, String, MultipartFile, String, HttpSession)
2025-12-10 09:08:20 - Executing SQL update and returning generated keys
2025-12-10 09:08:20 - Executing prepared SQL statement
2025-12-10 09:08:20 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:08:20 - Writing [{success=true, imageUrl=/static/uploads/d5dbe8aa-ac8e-43dd-bcb9-60cea061ab52.jpg, id=1, message=Рабо (truncated)...]
2025-12-10 09:08:20 - Completed 200 OK
2025-12-10 09:08:20 - GET "/api/admin/works", parameters={}
2025-12-10 09:08:20 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllWorks(HttpSession)
2025-12-10 09:08:20 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:08:20 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:08:20 - Writing [[com.extrime.electrician.model.Work@2288177c]]
2025-12-10 09:08:20 - Completed 200 OK
2025-12-10 09:08:20 - GET "/static/uploads/d5dbe8aa-ac8e-43dd-bcb9-60cea061ab52.jpg", parameters={}
2025-12-10 09:08:20 - Mapped to ResourceHttpRequestHandler [URL [file:/app/uploads/]]
2025-12-10 09:08:20 - Completed 200 OK
2025-12-10 09:08:23 - GET "/reviews", parameters={}
2025-12-10 09:08:23 - Mapped to com.extrime.electrician.controller.ReviewController#reviewsPage(Model, HttpSession)
2025-12-10 09:08:23 - Executing SQL query [SELECT r.*, u.username as user_username
FROM reviews r
LEFT JOIN users u ON r.user_id = u.id
WHERE r.active = true
ORDER BY r.created_at DESC
]
2025-12-10 09:08:23 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:08:23 - Completed 200 OK
2025-12-10 09:08:23 - GET "/static/css/reviews.css", parameters={}
2025-12-10 09:08:23 - GET "/static/js/reviews-script.js", parameters={}
2025-12-10 09:08:23 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:08:23 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:08:23 - Completed 200 OK
2025-12-10 09:08:23 - Completed 200 OK
2025-12-10 09:08:25 - GET "/", parameters={}
2025-12-10 09:08:25 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 09:08:25 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:08:25 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 09:08:25 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:08:25 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:08:25 - Completed 200 OK
2025-12-10 09:08:38 - GET "/logout", parameters={}
2025-12-10 09:08:38 - Mapped to com.extrime.electrician.controller.AuthController#logout(HttpSession)
2025-12-10 09:08:38 - View name [redirect:], model {}
2025-12-10 09:08:38 - Completed 302 FOUND
2025-12-10 09:08:38 - GET "/login", parameters={}
2025-12-10 09:08:38 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:08:38 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:08:38 - Completed 200 OK
2025-12-10 09:09:10 - GET "/register", parameters={}
2025-12-10 09:09:10 - Mapped to com.extrime.electrician.controller.RegisterController#showRegisterPage(Model)
2025-12-10 09:09:10 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:09:10 - Completed 200 OK
2025-12-10 09:09:26 - POST "/register", parameters={masked}
2025-12-10 09:09:26 - Mapped to com.extrime.electrician.controller.RegisterController#register(String, String, String, String, Model, RedirectAttributes)
2025-12-10 09:09:26 - Executing prepared SQL query
2025-12-10 09:09:26 - Executing prepared SQL statement [SELECT COUNT(*) FROM users WHERE username = ?]
2025-12-10 09:09:26 - Executing prepared SQL query
2025-12-10 09:09:26 - Executing prepared SQL statement [SELECT COUNT(*) FROM users WHERE email = ?]
2025-12-10 09:09:25 - Executing SQL update and returning generated keys
2025-12-10 09:09:25 - Executing prepared SQL statement
2025-12-10 09:09:25 - Executing SQL update and returning generated keys
2025-12-10 09:09:25 - Executing prepared SQL statement
2025-12-10 09:09:28 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:09:28 - Completed 200 OK
2025-12-10 09:09:28 - GET "/static/css/verification.css", parameters={}
2025-12-10 09:09:28 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:09:28 - Completed 200 OK
2025-12-10 09:09:28 - GET "/static/js/verification-script.js", parameters={}
2025-12-10 09:09:28 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:09:28 - Completed 200 OK
2025-12-10 09:09:39 - POST "/register/verify", parameters={masked}
2025-12-10 09:09:39 - Mapped to com.extrime.electrician.controller.RegisterController#verifyEmail(Long, String, String)
2025-12-10 09:09:39 - Executing prepared SQL query
2025-12-10 09:09:39 - Executing prepared SQL statement [SELECT * FROM email_verifications
WHERE email = ? AND verification_code = ?
ORDER BY created_at DESC LIMIT 1
]
2025-12-10 09:09:39 - Executing prepared SQL update
2025-12-10 09:09:39 - Executing prepared SQL statement [UPDATE email_verifications
SET used = ?
WHERE id = ?
]
2025-12-10 09:09:39 - Executing prepared SQL update
2025-12-10 09:09:39 - Executing prepared SQL statement [UPDATE users SET active = true WHERE id = ?]
2025-12-10 09:09:39 - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-10 09:09:39 - Writing [{success=true, message=Email успешно подтвержден! Теперь вы можете войти.}]
2025-12-10 09:09:39 - Completed 200 OK
2025-12-10 09:09:41 - GET "/login?verified=true", parameters={masked}
2025-12-10 09:09:41 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:09:41 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:09:41 - Completed 200 OK
2025-12-10 09:09:46 - POST "/login", parameters={masked}
2025-12-10 09:09:46 - Mapped to com.extrime.electrician.controller.AuthController#login(String, String, HttpSession, Model)
2025-12-10 09:09:46 - Executing prepared SQL query
2025-12-10 09:09:46 - Executing prepared SQL statement [SELECT * FROM users WHERE username = ? AND active = true]
2025-12-10 09:09:47 - View name [redirect:], model {}
2025-12-10 09:09:47 - Completed 302 FOUND
2025-12-10 09:09:47 - GET "/profile", parameters={}
2025-12-10 09:09:47 - Mapped to com.extrime.electrician.controller.AuthController#showProfile(HttpSession, Model)
2025-12-10 09:09:47 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:09:47 - Completed 200 OK
2025-12-10 09:09:49 - GET "/reviews", parameters={}
2025-12-10 09:09:49 - Mapped to com.extrime.electrician.controller.ReviewController#reviewsPage(Model, HttpSession)
2025-12-10 09:09:49 - Executing SQL query [SELECT r.*, u.username as user_username
FROM reviews r
LEFT JOIN users u ON r.user_id = u.id
WHERE r.active = true
ORDER BY r.created_at DESC
]
2025-12-10 09:09:49 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:09:49 - Completed 200 OK
2025-12-10 09:09:54 - POST "/reviews/add", parameters={masked}
2025-12-10 09:09:54 - Mapped to com.extrime.electrician.controller.ReviewController#addReview(Integer, String, HttpSession, RedirectAttributes)
2025-12-10 09:09:54 - Executing SQL update and returning generated keys
2025-12-10 09:09:54 - Executing prepared SQL statement
2025-12-10 09:09:54 - View name [redirect:], model {}
2025-12-10 09:09:54 - Completed 302 FOUND
2025-12-10 09:09:54 - GET "/reviews", parameters={}
2025-12-10 09:09:54 - Mapped to com.extrime.electrician.controller.ReviewController#reviewsPage(Model, HttpSession)
2025-12-10 09:09:54 - Executing SQL query [SELECT r.*, u.username as user_username
FROM reviews r
LEFT JOIN users u ON r.user_id = u.id
WHERE r.active = true
ORDER BY r.created_at DESC
]
2025-12-10 09:09:54 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:09:54 - Completed 200 OK
2025-12-10 09:09:58 - GET "/logout", parameters={}
2025-12-10 09:09:58 - Mapped to com.extrime.electrician.controller.AuthController#logout(HttpSession)
2025-12-10 09:09:58 - View name [redirect:], model {}
2025-12-10 09:09:58 - Completed 302 FOUND
2025-12-10 09:09:58 - GET "/login", parameters={}
2025-12-10 09:09:58 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:09:58 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:09:58 - Completed 200 OK
2025-12-10 09:10:12 - POST "/login", parameters={masked}
2025-12-10 09:10:12 - Mapped to com.extrime.electrician.controller.AuthController#login(String, String, HttpSession, Model)
2025-12-10 09:10:12 - Executing prepared SQL query
2025-12-10 09:10:12 - Executing prepared SQL statement [SELECT * FROM users WHERE username = ? AND active = true]
2025-12-10 09:10:12 - View name [redirect:], model {}
2025-12-10 09:10:12 - Completed 302 FOUND
2025-12-10 09:10:12 - GET "/profile", parameters={}
2025-12-10 09:10:12 - Mapped to com.extrime.electrician.controller.AuthController#showProfile(HttpSession, Model)
2025-12-10 09:10:12 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:12 - Completed 200 OK
2025-12-10 09:10:20 - GET "/admin", parameters={}
2025-12-10 09:10:20 - Mapped to com.extrime.electrician.controller.AdminController#adminPanel(HttpSession, Model)
2025-12-10 09:10:20 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:20 - Completed 200 OK
2025-12-10 09:10:38 - GET "/api/admin/services", parameters={}
2025-12-10 09:10:38 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllServices(HttpSession)
2025-12-10 09:10:38 - GET "/api/admin/works", parameters={}
2025-12-10 09:10:38 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllWorks(HttpSession)
2025-12-10 09:10:38 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:10:38 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:10:38 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:10:38 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:10:38 - Writing [[com.extrime.electrician.model.Work@10721bd]]
2025-12-10 09:10:38 - Writing [[com.extrime.electrician.model.OurService@eb1426c]]
2025-12-10 09:10:38 - Completed 200 OK
2025-12-10 09:10:38 - Completed 200 OK
2025-12-10 09:10:21 - GET "/reviews", parameters={}
2025-12-10 09:10:21 - Mapped to com.extrime.electrician.controller.ReviewController#reviewsPage(Model, HttpSession)
2025-12-10 09:10:21 - Executing SQL query [SELECT r.*, u.username as user_username
FROM reviews r
LEFT JOIN users u ON r.user_id = u.id
WHERE r.active = true
ORDER BY r.created_at DESC
]
2025-12-10 09:10:21 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:21 - Completed 200 OK
2025-12-10 09:10:26 - POST "/reviews/1/admin-response", parameters={masked}
2025-12-10 09:10:26 - Mapped to com.extrime.electrician.controller.ReviewController#addAdminResponse(Long, String, HttpSession, RedirectAttributes)
2025-12-10 09:10:26 - Executing prepared SQL update
2025-12-10 09:10:26 - Executing prepared SQL statement [UPDATE reviews SET admin_response = ?, updated_at = ? WHERE id = ?]
2025-12-10 09:10:26 - View name [redirect:], model {}
2025-12-10 09:10:26 - Completed 302 FOUND
2025-12-10 09:10:26 - GET "/reviews", parameters={}
2025-12-10 09:10:26 - Mapped to com.extrime.electrician.controller.ReviewController#reviewsPage(Model, HttpSession)
2025-12-10 09:10:26 - Executing SQL query [SELECT r.*, u.username as user_username
FROM reviews r
LEFT JOIN users u ON r.user_id = u.id
WHERE r.active = true
ORDER BY r.created_at DESC
]
2025-12-10 09:10:26 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:26 - Completed 200 OK
2025-12-10 09:10:28 - GET "/", parameters={}
2025-12-10 09:10:28 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 09:10:28 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:10:28 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 09:10:28 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:10:28 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:28 - Completed 200 OK
2025-12-10 09:10:34 - GET "/reviews", parameters={}
2025-12-10 09:10:34 - Mapped to com.extrime.electrician.controller.ReviewController#reviewsPage(Model, HttpSession)
2025-12-10 09:10:34 - Executing SQL query [SELECT r.*, u.username as user_username
FROM reviews r
LEFT JOIN users u ON r.user_id = u.id
WHERE r.active = true
ORDER BY r.created_at DESC
]
2025-12-10 09:10:34 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:34 - Completed 200 OK
2025-12-10 09:10:42 - GET "/admin", parameters={}
2025-12-10 09:10:42 - Mapped to com.extrime.electrician.controller.AdminController#adminPanel(HttpSession, Model)
2025-12-10 09:10:42 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:42 - Completed 200 OK
2025-12-10 09:10:42 - GET "/api/admin/services", parameters={}
2025-12-10 09:10:42 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllServices(HttpSession)
2025-12-10 09:10:42 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:10:42 - GET "/api/admin/works", parameters={}
2025-12-10 09:10:42 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllWorks(HttpSession)
2025-12-10 09:10:42 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:10:42 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:10:42 - Writing [[com.extrime.electrician.model.Work@2617c545]]
2025-12-10 09:10:42 - Completed 200 OK
2025-12-10 09:10:42 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:10:42 - Writing [[com.extrime.electrician.model.OurService@4a568ec6]]
2025-12-10 09:10:42 - Completed 200 OK
2025-12-10 09:10:46 - GET "/api/admin/services/1", parameters={}
2025-12-10 09:10:46 - Mapped to com.extrime.electrician.controller.AdminApiController#getServiceById(Long, HttpSession)
2025-12-10 09:10:46 - Executing prepared SQL query
2025-12-10 09:10:46 - Executing prepared SQL statement [SELECT * FROM services WHERE id = ?]
2025-12-10 09:10:46 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:10:46 - Writing [com.extrime.electrician.model.OurService@76131b68]
2025-12-10 09:10:46 - Completed 200 OK
2025-12-10 09:10:48 - PUT "/api/admin/services/1", parameters={}
2025-12-10 09:10:48 - Mapped to com.extrime.electrician.controller.AdminApiController#updateService(Long, Map, HttpSession)
2025-12-10 09:10:48 - Read "application/json;charset=UTF-8" to [{title=12, description=132, price=12, priceUnit=штука, isPopular=false}]
2025-12-10 09:10:48 - Executing prepared SQL query
2025-12-10 09:10:48 - Executing prepared SQL statement [SELECT * FROM services WHERE id = ?]
2025-12-10 09:10:48 - Executing prepared SQL update
2025-12-10 09:10:48 - Executing prepared SQL statement [UPDATE services SET title = ?, description = ?, price = ?, price_unit = ?, is_popular = ? WHERE id = ?]
2025-12-10 09:10:48 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:10:48 - Writing [{success=true, message=Услуга успешно обновлена}]
2025-12-10 09:10:48 - Completed 200 OK
2025-12-10 09:10:48 - GET "/api/admin/services", parameters={}
2025-12-10 09:10:48 - Mapped to com.extrime.electrician.controller.AdminApiController#getAllServices(HttpSession)
2025-12-10 09:10:48 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:10:48 - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-12-10 09:10:48 - Writing [[com.extrime.electrician.model.OurService@50e9bc9a]]
2025-12-10 09:10:48 - Completed 200 OK
2025-12-10 09:10:50 - GET "/", parameters={}
2025-12-10 09:10:50 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 09:10:50 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:10:50 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 09:10:50 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:10:50 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:50 - Completed 200 OK
2025-12-10 09:10:54 - GET "/logout", parameters={}
2025-12-10 09:10:54 - Mapped to com.extrime.electrician.controller.AuthController#logout(HttpSession)
2025-12-10 09:10:54 - View name [redirect:], model {}
2025-12-10 09:10:54 - Completed 302 FOUND
2025-12-10 09:10:54 - GET "/login", parameters={}
2025-12-10 09:10:54 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:10:54 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:54 - Completed 200 OK
2025-12-10 09:10:56 - GET "/password/forgot", parameters={}
2025-12-10 09:10:56 - Mapped to com.extrime.electrician.controller.PasswordResetController#showForgotPasswordPage(Model)
2025-12-10 09:10:56 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:56 - Completed 200 OK
2025-12-10 09:10:56 - GET "/static/css/password-reset.css", parameters={}
2025-12-10 09:10:56 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:10:56 - Completed 200 OK
2025-12-10 09:10:57 - POST "/password/forgot", parameters={masked}
2025-12-10 09:10:57 - Mapped to com.extrime.electrician.controller.PasswordResetController#processForgotPassword(String, Model)
2025-12-10 09:10:57 - Executing prepared SQL query
2025-12-10 09:10:57 - Executing prepared SQL statement [SELECT * FROM users WHERE email = ? AND active = true]
2025-12-10 09:10:59 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:10:59 - Completed 200 OK
2025-12-10 09:11:06 - GET "/password/reset?token=443361e7-b012-4c4c-8d70-829b94aca38f", parameters={masked}
2025-12-10 09:11:06 - Mapped to com.extrime.electrician.controller.PasswordResetController#showResetPasswordPage(String, Model)
2025-12-10 09:11:06 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:06 - Completed 200 OK
2025-12-10 09:11:06 - GET "/static/js/password-reset-script.js", parameters={}
2025-12-10 09:11:06 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 09:11:06 - Completed 200 OK
2025-12-10 09:11:30 - POST "/password/reset", parameters={masked}
2025-12-10 09:11:30 - Mapped to com.extrime.electrician.controller.PasswordResetController#processResetPassword(String, String, String, Model)
2025-12-10 09:11:30 - Executing prepared SQL query
2025-12-10 09:11:30 - Executing prepared SQL statement [SELECT * FROM users WHERE email = ? AND active = true]
2025-12-10 09:11:30 - Executing prepared SQL update
2025-12-10 09:11:30 - Executing prepared SQL statement [UPDATE users
SET username = ?, email = ?, password = ?,
    role = ?, active = ?, created_at = ?,
    email_verified = ?
WHERE id = ?
]
2025-12-10 09:11:30 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:30 - Completed 200 OK
2025-12-10 09:11:32 - GET "/", parameters={}
2025-12-10 09:11:32 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 09:11:32 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 09:11:32 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 09:11:32 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 09:11:32 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:32 - Completed 200 OK
2025-12-10 09:11:33 - GET "/login", parameters={}
2025-12-10 09:11:33 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:11:33 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:33 - Completed 200 OK
2025-12-10 09:11:38 - POST "/login", parameters={masked}
2025-12-10 09:11:38 - Mapped to com.extrime.electrician.controller.AuthController#login(String, String, HttpSession, Model)
2025-12-10 09:11:38 - Executing prepared SQL query
2025-12-10 09:11:38 - Executing prepared SQL statement [SELECT * FROM users WHERE username = ? AND active = true]
2025-12-10 09:11:38 - View name [redirect:], model {}
2025-12-10 09:11:38 - Completed 302 FOUND
2025-12-10 09:11:38 - GET "/profile", parameters={}
2025-12-10 09:11:38 - Mapped to com.extrime.electrician.controller.AuthController#showProfile(HttpSession, Model)
2025-12-10 09:11:38 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:38 - Completed 200 OK
2025-12-10 09:11:43 - GET "/admin", parameters={}
2025-12-10 09:11:43 - Mapped to com.extrime.electrician.controller.AdminController#adminPanel(HttpSession, Model)
2025-12-10 09:11:43 - View name [redirect:], model {}
2025-12-10 09:11:43 - Completed 302 FOUND
2025-12-10 09:11:43 - GET "/profile", parameters={}
2025-12-10 09:11:43 - Mapped to com.extrime.electrician.controller.AuthController#showProfile(HttpSession, Model)
2025-12-10 09:11:43 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:43 - Completed 200 OK
2025-12-10 09:11:46 - GET "/logout", parameters={}
2025-12-10 09:11:46 - Mapped to com.extrime.electrician.controller.AuthController#logout(HttpSession)
2025-12-10 09:11:46 - View name [redirect:], model {}
2025-12-10 09:11:46 - Completed 302 FOUND
2025-12-10 09:11:46 - GET "/login", parameters={}
2025-12-10 09:11:46 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:11:46 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:46 - Completed 200 OK
2025-12-10 09:11:48 - GET "/admin", parameters={}
2025-12-10 09:11:48 - Mapped to com.extrime.electrician.controller.AdminController#adminPanel(HttpSession, Model)
2025-12-10 09:11:48 - View name [redirect:], model {}
2025-12-10 09:11:48 - Completed 302 FOUND
2025-12-10 09:11:48 - GET "/login", parameters={}
2025-12-10 09:11:48 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 09:11:48 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 09:11:48 - Completed 200 OK
2025-12-10 10:04:19 - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-10 10:04:19 - Graceful shutdown complete
2025-12-10 10:04:19 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:09:09 - Starting ElectricianApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 1 (/app/app.jar started by root in /app)
2025-12-10 10:09:09 - Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-10 10:09:09 - No active profile set, falling back to 1 default profile: "default"
2025-12-10 10:09:09 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-10 10:09:09 - Finished Spring Data repository scanning in 13 ms. Found 0 JPA repository interfaces.
2025-12-10 10:09:10 - Tomcat initialized with port 80 (http)
2025-12-10 10:09:10 - Starting service [Tomcat]
2025-12-10 10:09:10 - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-10 10:09:10 - Root WebApplicationContext: initialization completed in 964 ms
2025-12-10 10:09:10 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-10 10:09:10 - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-10 10:09:10 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-10 10:09:11 - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-10 10:09:11 - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://postgres:5432/electricianDB]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 17.7
	Default catalog/schema: electricianDB/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-10 10:09:11 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-10 10:09:11 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:09:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    price_unit VARCHAR(50) DEFAULT 'за штуку',
    is_popular BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:09:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS works (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    work_date DATE NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:09:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    role VARCHAR(20) DEFAULT 'USER',
    active BOOLEAN DEFAULT true,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:09:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)]
2025-12-10 10:09:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)]
2025-12-10 10:09:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email_verified ON users(email_verified) WHERE email_verified = false]
2025-12-10 10:09:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_active ON users(active)]
2025-12-10 10:09:11 - Executing SQL statement [INSERT INTO users (username, password, email, role)
VALUES ('admin', '$2a$12$85ADATkk12Cv4rjSUWpxg.t4pOOJBWevboxVEzhG8Icfko0vY39nS', 'electric252.com@gmail.com', 'ADMIN')
ON CONFLICT (username) DO NOTHING;
]
2025-12-10 10:09:12 - Executing SQL statement [CREATE TABLE IF NOT EXISTS email_verifications (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    verification_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    user_id BIGINT NOT NULL,
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
)
]
2025-12-10 10:09:12 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email ON email_verifications(email)]
2025-12-10 10:09:12 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email_code ON email_verifications(email, verification_code)]
2025-12-10 10:09:12 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_expires ON email_verifications(expires_at)]
2025-12-10 10:09:12 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_used ON email_verifications(used) WHERE used = false]
2025-12-10 10:09:12 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_user_id ON email_verifications(user_id)]
2025-12-10 10:09:12 - Executing SQL statement [CREATE TABLE IF NOT EXISTS reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    username VARCHAR(100) NOT NULL,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT NOT NULL,
    admin_response TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:09:12 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_user_id ON reviews(user_id)]
2025-12-10 10:09:12 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_active ON reviews(active)]
2025-12-10 10:09:12 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-10 10:09:12 - 38 mappings in 'requestMappingHandlerMapping'
2025-12-10 10:09:12 - Default resource handling disabled
2025-12-10 10:09:12 - Patterns [/static/uploads/**, /static/**] in 'resourceHandlerMapping'
2025-12-10 10:09:13 - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-10 10:09:13 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-10 10:09:13 - Tomcat started on port 80 (http) with context path '/'
2025-12-10 10:09:13 - Started ElectricianApplication in 4.637 seconds (process running for 5.275)
2025-12-10 10:11:03 - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-10 10:11:03 - Graceful shutdown complete
2025-12-10 10:11:03 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:11:05 - Starting ElectricianApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 1 (/app/app.jar started by root in /app)
2025-12-10 10:11:05 - Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-10 10:11:05 - No active profile set, falling back to 1 default profile: "default"
2025-12-10 10:11:06 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-10 10:11:06 - Finished Spring Data repository scanning in 12 ms. Found 0 JPA repository interfaces.
2025-12-10 10:11:06 - Tomcat initialized with port 80 (http)
2025-12-10 10:11:06 - Starting service [Tomcat]
2025-12-10 10:11:06 - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-10 10:11:06 - Root WebApplicationContext: initialization completed in 1065 ms
2025-12-10 10:11:07 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-10 10:11:07 - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-10 10:11:07 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-10 10:11:07 - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-10 10:11:07 - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://postgres:5432/electricianDB]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 17.7
	Default catalog/schema: electricianDB/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-10 10:11:08 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-10 10:11:08 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:11:08 - Executing SQL statement [CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    price_unit VARCHAR(50) DEFAULT 'за штуку',
    is_popular BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "services" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE TABLE IF NOT EXISTS works (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    work_date DATE NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "works" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    role VARCHAR(20) DEFAULT 'USER',
    active BOOLEAN DEFAULT true,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "users" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_username" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_email" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email_verified ON users(email_verified) WHERE email_verified = false]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_email_verified" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_active ON users(active)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_active" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [INSERT INTO users (username, password, email, role)
VALUES ('admin', '$2a$12$85ADATkk12Cv4rjSUWpxg.t4pOOJBWevboxVEzhG8Icfko0vY39nS', 'electric252.com@gmail.com', 'ADMIN')
ON CONFLICT (username) DO NOTHING;
]
2025-12-10 10:11:08 - Executing SQL statement [CREATE TABLE IF NOT EXISTS email_verifications (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    verification_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    user_id BIGINT NOT NULL,
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
)
]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "email_verifications" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email ON email_verifications(email)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_email" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email_code ON email_verifications(email, verification_code)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_email_code" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_expires ON email_verifications(expires_at)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_expires" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_used ON email_verifications(used) WHERE used = false]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_used" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_user_id ON email_verifications(user_id)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_user_id" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE TABLE IF NOT EXISTS reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    username VARCHAR(100) NOT NULL,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT NOT NULL,
    admin_response TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "reviews" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_user_id ON reviews(user_id)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_reviews_user_id" already exists, skipping]
2025-12-10 10:11:08 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_active ON reviews(active)]
2025-12-10 10:11:08 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_reviews_active" already exists, skipping]
2025-12-10 10:11:08 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-10 10:11:08 - 38 mappings in 'requestMappingHandlerMapping'
2025-12-10 10:11:08 - Default resource handling disabled
2025-12-10 10:11:08 - Patterns [/static/uploads/**, /static/**] in 'resourceHandlerMapping'
2025-12-10 10:11:08 - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-10 10:11:08 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-10 10:11:08 - Tomcat started on port 80 (http) with context path '/'
2025-12-10 10:11:08 - Started ElectricianApplication in 3.543 seconds (process running for 4.055)
2025-12-10 10:11:19 - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-10 10:11:19 - Graceful shutdown complete
2025-12-10 10:11:19 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:14:08 - Starting ElectricianApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 1 (/app/app.jar started by root in /app)
2025-12-10 10:14:08 - Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-10 10:14:08 - No active profile set, falling back to 1 default profile: "default"
2025-12-10 10:14:09 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-10 10:14:09 - Finished Spring Data repository scanning in 12 ms. Found 0 JPA repository interfaces.
2025-12-10 10:14:09 - Tomcat initialized with port 8081 (http)
2025-12-10 10:14:10 - Starting service [Tomcat]
2025-12-10 10:14:10 - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-10 10:14:10 - Root WebApplicationContext: initialization completed in 1234 ms
2025-12-10 10:14:10 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-10 10:14:10 - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-10 10:14:10 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-10 10:14:11 - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-10 10:14:11 - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://postgres:5432/electrician_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 17.7
	Default catalog/schema: electrician_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-10 10:14:11 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-10 10:14:11 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:14:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    price_unit VARCHAR(50) DEFAULT 'за штуку',
    is_popular BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:14:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS works (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    work_date DATE NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:14:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    role VARCHAR(20) DEFAULT 'USER',
    active BOOLEAN DEFAULT true,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email_verified ON users(email_verified) WHERE email_verified = false]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_active ON users(active)]
2025-12-10 10:14:11 - Executing SQL statement [INSERT INTO users (username, password, email, role)
VALUES ('admin', '$2a$12$85ADATkk12Cv4rjSUWpxg.t4pOOJBWevboxVEzhG8Icfko0vY39nS', 'electric252.com@gmail.com', 'ADMIN')
ON CONFLICT (username) DO NOTHING;
]
2025-12-10 10:14:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS email_verifications (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    verification_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    user_id BIGINT NOT NULL,
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
)
]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email ON email_verifications(email)]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email_code ON email_verifications(email, verification_code)]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_expires ON email_verifications(expires_at)]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_used ON email_verifications(used) WHERE used = false]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_user_id ON email_verifications(user_id)]
2025-12-10 10:14:11 - Executing SQL statement [CREATE TABLE IF NOT EXISTS reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    username VARCHAR(100) NOT NULL,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT NOT NULL,
    admin_response TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_user_id ON reviews(user_id)]
2025-12-10 10:14:11 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_active ON reviews(active)]
2025-12-10 10:14:11 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-10 10:14:12 - 38 mappings in 'requestMappingHandlerMapping'
2025-12-10 10:14:12 - Default resource handling disabled
2025-12-10 10:14:12 - Patterns [/static/uploads/**, /static/**] in 'resourceHandlerMapping'
2025-12-10 10:14:12 - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-10 10:14:12 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-10 10:14:29 - Tomcat started on port 8081 (http) with context path '/'
2025-12-10 10:14:29 - Started ElectricianApplication in 21.292 seconds (process running for 4.693)
2025-12-10 10:14:27 - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-10 10:14:27 - Graceful shutdown complete
2025-12-10 10:14:27 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:15:26 - Starting ElectricianApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 1 (/app/app.jar started by root in /app)
2025-12-10 10:15:26 - Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-10 10:15:26 - No active profile set, falling back to 1 default profile: "default"
2025-12-10 10:15:27 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-10 10:15:27 - Finished Spring Data repository scanning in 12 ms. Found 0 JPA repository interfaces.
2025-12-10 10:15:27 - Tomcat initialized with port 8081 (http)
2025-12-10 10:15:27 - Starting service [Tomcat]
2025-12-10 10:15:27 - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-10 10:15:27 - Root WebApplicationContext: initialization completed in 663 ms
2025-12-10 10:15:27 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-10 10:15:27 - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-10 10:15:27 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-10 10:15:28 - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-10 10:15:28 - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://postgres:5432/electrician_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 17.7
	Default catalog/schema: electrician_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-10 10:15:28 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-10 10:15:28 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 10:15:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    price_unit VARCHAR(50) DEFAULT 'за штуку',
    is_popular BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:15:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS works (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    work_date DATE NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:15:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    role VARCHAR(20) DEFAULT 'USER',
    active BOOLEAN DEFAULT true,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email_verified ON users(email_verified) WHERE email_verified = false]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_active ON users(active)]
2025-12-10 10:15:28 - Executing SQL statement [INSERT INTO users (username, password, email, role)
VALUES ('admin', '$2a$12$85ADATkk12Cv4rjSUWpxg.t4pOOJBWevboxVEzhG8Icfko0vY39nS', 'electric252.com@gmail.com', 'ADMIN')
ON CONFLICT (username) DO NOTHING;
]
2025-12-10 10:15:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS email_verifications (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    verification_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    user_id BIGINT NOT NULL,
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
)
]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email ON email_verifications(email)]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email_code ON email_verifications(email, verification_code)]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_expires ON email_verifications(expires_at)]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_used ON email_verifications(used) WHERE used = false]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_user_id ON email_verifications(user_id)]
2025-12-10 10:15:28 - Executing SQL statement [CREATE TABLE IF NOT EXISTS reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    username VARCHAR(100) NOT NULL,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT NOT NULL,
    admin_response TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_user_id ON reviews(user_id)]
2025-12-10 10:15:28 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_active ON reviews(active)]
2025-12-10 10:15:28 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-10 10:15:29 - 38 mappings in 'requestMappingHandlerMapping'
2025-12-10 10:15:29 - Default resource handling disabled
2025-12-10 10:15:29 - Patterns [/static/uploads/**, /static/**] in 'resourceHandlerMapping'
2025-12-10 10:15:29 - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-10 10:15:29 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-10 10:15:29 - Tomcat started on port 8081 (http) with context path '/'
2025-12-10 10:15:29 - Started ElectricianApplication in 3.552 seconds (process running for 4.581)
2025-12-10 10:15:35 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-10 10:15:35 - Initializing Servlet 'dispatcherServlet'
2025-12-10 10:15:35 - Detected StandardServletMultipartResolver
2025-12-10 10:15:35 - Detected AcceptHeaderLocaleResolver
2025-12-10 10:15:35 - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4a14f7d7
2025-12-10 10:15:35 - Detected org.springframework.web.servlet.support.SessionFlashMapManager@237aba92
2025-12-10 10:15:35 - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-10 10:15:35 - Completed initialization in 3 ms
2025-12-10 10:15:35 - GET "/", parameters={}
2025-12-10 10:15:35 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 10:15:35 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 10:15:35 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 10:15:35 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 10:15:35 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 10:15:36 - Completed 200 OK
2025-12-10 10:15:36 - GET "/static/css/home.css", parameters={}
2025-12-10 10:15:36 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 10:15:36 - Completed 200 OK
2025-12-10 10:15:39 - GET "/login", parameters={}
2025-12-10 10:15:39 - Mapped to com.extrime.electrician.controller.AuthController#showLoginPage(Model)
2025-12-10 10:15:39 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 10:15:39 - Completed 200 OK
2025-12-10 10:15:39 - GET "/static/css/login.css", parameters={}
2025-12-10 10:15:39 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 10:15:39 - Completed 200 OK
2025-12-10 10:15:39 - GET "/static/js/login-script.js", parameters={}
2025-12-10 10:15:39 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 10:15:39 - Completed 200 OK
2025-12-10 10:15:46 - POST "/login", parameters={masked}
2025-12-10 10:15:46 - Mapped to com.extrime.electrician.controller.AuthController#login(String, String, HttpSession, Model)
2025-12-10 10:15:46 - Executing prepared SQL query
2025-12-10 10:15:46 - Executing prepared SQL statement [SELECT * FROM users WHERE username = ? AND active = true]
2025-12-10 10:15:46 - View name [redirect:], model {}
2025-12-10 10:15:46 - Completed 302 FOUND
2025-12-10 10:15:46 - GET "/profile", parameters={}
2025-12-10 10:15:46 - Mapped to com.extrime.electrician.controller.AuthController#showProfile(HttpSession, Model)
2025-12-10 10:15:46 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 10:15:46 - Completed 200 OK
2025-12-10 10:15:47 - GET "/static/css/profile.css", parameters={}
2025-12-10 10:15:47 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 10:15:47 - Completed 200 OK
2025-12-10 10:30:31 - GET "/", parameters={}
2025-12-10 10:30:31 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 10:30:31 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 10:30:31 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 10:30:13 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 10:30:13 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 10:30:13 - Completed 200 OK
2025-12-10 10:30:50 - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-10 10:30:50 - Graceful shutdown complete
2025-12-10 10:30:50 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 11:33:20 - Starting ElectricianApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 1 (/app/app.jar started by root in /app)
2025-12-10 11:33:20 - Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-10 11:33:20 - No active profile set, falling back to 1 default profile: "default"
2025-12-10 11:33:21 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-10 11:33:21 - Finished Spring Data repository scanning in 11 ms. Found 0 JPA repository interfaces.
2025-12-10 11:33:21 - Tomcat initialized with port 8081 (http)
2025-12-10 11:33:21 - Starting service [Tomcat]
2025-12-10 11:33:21 - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-10 11:33:21 - Root WebApplicationContext: initialization completed in 1111 ms
2025-12-10 11:33:21 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-10 11:33:22 - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-10 11:33:22 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-10 11:33:22 - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-10 11:33:22 - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://postgres:5432/electrician_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 17.7
	Default catalog/schema: electrician_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-10 11:33:23 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-10 11:33:23 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 11:33:23 - Executing SQL statement [CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    price_unit VARCHAR(50) DEFAULT 'за штуку',
    is_popular BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "services" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE TABLE IF NOT EXISTS works (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    work_date DATE NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "works" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    role VARCHAR(20) DEFAULT 'USER',
    active BOOLEAN DEFAULT true,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "users" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_username" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_email" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email_verified ON users(email_verified) WHERE email_verified = false]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_email_verified" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_active ON users(active)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_active" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [INSERT INTO users (username, password, email, role)
VALUES ('admin', '$2a$12$85ADATkk12Cv4rjSUWpxg.t4pOOJBWevboxVEzhG8Icfko0vY39nS', 'electric252.com@gmail.com', 'ADMIN')
ON CONFLICT (username) DO NOTHING;
]
2025-12-10 11:33:23 - Executing SQL statement [CREATE TABLE IF NOT EXISTS email_verifications (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    verification_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    user_id BIGINT NOT NULL,
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
)
]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "email_verifications" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email ON email_verifications(email)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_email" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email_code ON email_verifications(email, verification_code)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_email_code" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_expires ON email_verifications(expires_at)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_expires" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_used ON email_verifications(used) WHERE used = false]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_used" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_user_id ON email_verifications(user_id)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_user_id" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE TABLE IF NOT EXISTS reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    username VARCHAR(100) NOT NULL,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT NOT NULL,
    admin_response TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "reviews" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_user_id ON reviews(user_id)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_reviews_user_id" already exists, skipping]
2025-12-10 11:33:23 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_active ON reviews(active)]
2025-12-10 11:33:23 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_reviews_active" already exists, skipping]
2025-12-10 11:33:23 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-10 11:33:23 - 38 mappings in 'requestMappingHandlerMapping'
2025-12-10 11:33:23 - Default resource handling disabled
2025-12-10 11:33:23 - Patterns [/static/uploads/**, /static/**] in 'resourceHandlerMapping'
2025-12-10 11:33:23 - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-10 11:33:23 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-10 11:33:23 - Tomcat started on port 8081 (http) with context path '/'
2025-12-10 11:33:23 - Started ElectricianApplication in 3.85 seconds (process running for 4.487)
2025-12-10 11:33:25 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-10 11:33:25 - Initializing Servlet 'dispatcherServlet'
2025-12-10 11:33:25 - Detected StandardServletMultipartResolver
2025-12-10 11:33:25 - Detected AcceptHeaderLocaleResolver
2025-12-10 11:33:25 - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4c78e00c
2025-12-10 11:33:25 - Detected org.springframework.web.servlet.support.SessionFlashMapManager@20d65767
2025-12-10 11:33:25 - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-10 11:33:25 - Completed initialization in 3 ms
2025-12-10 11:33:25 - GET "/", parameters={}
2025-12-10 11:33:25 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 11:33:25 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 11:33:25 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 11:33:25 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 11:33:25 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 11:33:25 - Completed 200 OK
2025-12-10 11:33:51 - GET "/", parameters={}
2025-12-10 11:33:51 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 11:33:51 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 11:33:51 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 11:33:51 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 11:33:51 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 11:33:51 - Completed 200 OK
2025-12-10 11:34:24 - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-10 11:34:25 - Graceful shutdown complete
2025-12-10 11:34:25 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 11:34:53 - Starting ElectricianApplication v0.0.1-SNAPSHOT using Java 21.0.9 with PID 1 (/app/app.jar started by root in /app)
2025-12-10 11:34:53 - Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-10 11:34:53 - No active profile set, falling back to 1 default profile: "default"
2025-12-10 11:34:53 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-10 11:34:54 - Finished Spring Data repository scanning in 12 ms. Found 0 JPA repository interfaces.
2025-12-10 11:34:54 - Tomcat initialized with port 80 (http)
2025-12-10 11:34:54 - Starting service [Tomcat]
2025-12-10 11:34:54 - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-10 11:34:54 - Root WebApplicationContext: initialization completed in 1110 ms
2025-12-10 11:34:54 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-10 11:34:54 - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-10 11:34:55 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-10 11:34:55 - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-10 11:34:55 - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://postgres:5432/electrician_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 17.7
	Default catalog/schema: electrician_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-10 11:34:55 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-10 11:34:55 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-10 11:34:56 - Executing SQL statement [CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    price_unit VARCHAR(50) DEFAULT 'за штуку',
    is_popular BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "services" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE TABLE IF NOT EXISTS works (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    work_date DATE NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "works" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    role VARCHAR(20) DEFAULT 'USER',
    active BOOLEAN DEFAULT true,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "users" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_username" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_email" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_email_verified ON users(email_verified) WHERE email_verified = false]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_email_verified" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_users_active ON users(active)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_users_active" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [INSERT INTO users (username, password, email, role)
VALUES ('admin', '$2a$12$85ADATkk12Cv4rjSUWpxg.t4pOOJBWevboxVEzhG8Icfko0vY39nS', 'electric252.com@gmail.com', 'ADMIN')
ON CONFLICT (username) DO NOTHING;
]
2025-12-10 11:34:56 - Executing SQL statement [CREATE TABLE IF NOT EXISTS email_verifications (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    verification_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    user_id BIGINT NOT NULL,
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
)
]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "email_verifications" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email ON email_verifications(email)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_email" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_email_code ON email_verifications(email, verification_code)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_email_code" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_expires ON email_verifications(expires_at)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_expires" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_used ON email_verifications(used) WHERE used = false]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_used" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_email_verifications_user_id ON email_verifications(user_id)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_email_verifications_user_id" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE TABLE IF NOT EXISTS reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    username VARCHAR(100) NOT NULL,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    comment TEXT NOT NULL,
    admin_response TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "reviews" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_user_id ON reviews(user_id)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_reviews_user_id" already exists, skipping]
2025-12-10 11:34:56 - Executing SQL statement [CREATE INDEX IF NOT EXISTS idx_reviews_active ON reviews(active)]
2025-12-10 11:34:56 - SQLWarning ignored: SQL state '42P07', error code '0', message [relation "idx_reviews_active" already exists, skipping]
2025-12-10 11:34:56 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-10 11:34:56 - 38 mappings in 'requestMappingHandlerMapping'
2025-12-10 11:34:56 - Default resource handling disabled
2025-12-10 11:34:56 - Patterns [/static/uploads/**, /static/**] in 'resourceHandlerMapping'
2025-12-10 11:34:56 - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-10 11:34:56 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-10 11:34:56 - Tomcat started on port 80 (http) with context path '/'
2025-12-10 11:34:56 - Started ElectricianApplication in 3.829 seconds (process running for 4.424)
2025-12-10 11:34:56 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-10 11:34:56 - Initializing Servlet 'dispatcherServlet'
2025-12-10 11:34:56 - Detected StandardServletMultipartResolver
2025-12-10 11:34:56 - Detected AcceptHeaderLocaleResolver
2025-12-10 11:34:56 - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@723b8eff
2025-12-10 11:34:56 - Detected org.springframework.web.servlet.support.SessionFlashMapManager@66596c4c
2025-12-10 11:34:56 - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-10 11:34:56 - Completed initialization in 3 ms
2025-12-10 11:34:56 - GET "/", parameters={}
2025-12-10 11:34:56 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 11:34:57 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 11:34:57 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 11:34:57 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 11:34:57 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 11:34:57 - Completed 200 OK
2025-12-10 11:34:57 - GET "/static/css/home.css", parameters={}
2025-12-10 11:34:57 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 11:34:57 - Completed 200 OK
2025-12-10 11:34:57 - GET "/favicon.ico", parameters={}
2025-12-10 11:34:57 - No mapping for GET /favicon.ico
2025-12-10 11:34:57 - No endpoint GET /favicon.ico.
2025-12-10 11:34:57 - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /favicon.ico.]
2025-12-10 11:34:57 - Completed 404 NOT_FOUND
2025-12-10 11:34:57 - "ERROR" dispatch for GET "/error", parameters={}
2025-12-10 11:34:57 - Mapped to com.extrime.electrician.controller.CustomErrorController#handleError(HttpServletRequest, Model)
2025-12-10 11:34:57 - Selected '*/*' given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8]
2025-12-10 11:34:57 - Exiting from "ERROR" dispatch, status 404
2025-12-10 12:06:40 - GET "/", parameters={}
2025-12-10 12:06:40 - Mapped to com.extrime.electrician.controller.HomeController#home(Model, HttpSession)
2025-12-10 12:06:40 - Executing SQL query [SELECT * FROM services ORDER BY title]
2025-12-10 12:06:40 - Executing SQL query [SELECT * FROM services WHERE is_popular = true ORDER BY title]
2025-12-10 12:06:40 - Executing SQL query [SELECT * FROM works ORDER BY work_date DESC]
2025-12-10 12:06:40 - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-12-10 12:06:40 - Completed 200 OK
2025-12-10 12:06:40 - GET "/static/css/home.css", parameters={}
2025-12-10 12:06:40 - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-12-10 12:06:40 - Completed 200 OK
2025-12-10 12:37:19 - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-10 12:37:19 - Graceful shutdown complete
2025-12-10 12:37:19 - Closing JPA EntityManagerFactory for persistence unit 'default'
